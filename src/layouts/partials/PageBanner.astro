---
// src/partials/Banner.astro
import DynamicIcon from "@/helpers/DynamicIcon";
import { markdownify } from "@/lib/utils/textConverter";

interface Button {
  link: string;
  icon: string;
  label: string;
}

interface Props {
  banner: {
    image: string;
    title: string;
    content?: string; // Optional
    buttons?: Button[]; // Optional
  };
}

const { banner } = Astro.props;
---

<section
  class="section pt-14 bg-primary/20 bg-blend-overlay bg-cover bg-center bg-fixed"
  style={`background-image: url('${banner.image}')`}
>
  <div class="container h-screen max-h-[600px] min-h-[500px]">
    <div class="row justify-center h-full">
      <div class="lg:col-9 md:col-10 text-center h-full">
        <div
          class="grid grid-rows-[auto_1fr_auto] h-full items-center justify-center"
        >
          {/* Title area - fixed height */}
          <div class="row-start-1">
            <h1
              set:html={markdownify(banner.title)}
              class="mb-6 text-h2 lg:text-h1 text-white text-shadow-lg/30"
            />
          </div>

          {/* Content area - flexible */}
          <div class="row-start-2 flex items-center justify-center">
            {
              banner.content && (
                <p
                  set:html={markdownify(banner.content)}
                  class="text-h6 md:text-h5 text-white text-shadow-lg/30"
                />
              )
            }
          </div>

          {/* Buttons area - fixed height */}
          <div class="row-start-3">
            {
              banner.buttons && banner.buttons.length > 0 && (
                <div class="flex flex-col sm:flex-row items-center justify-center gap-4 md:gap-6">
                  {banner.buttons.map((button) => (
                    <div class="col-3 lg:col-2">
                      <div class="hover:animate-pulse-strong">
                        <a
                          class="inline-flex items-center justify-center transition-all-300 border-white border-2 rounded-full w-20 h-20 bg-primary/20 hover:bg-primary/40 cursor-pointer"
                          href={button.link}
                        >
                          <DynamicIcon
                            color="white"
                            size="30"
                            icon={button.icon}
                          />
                        </a>
                      </div>
                      <p
                        set:html={markdownify(button.label)}
                        class="text-h6 md:text-h5 text-white text-shadow-lg/30 font-bold lg:font-semibold mt-2"
                      />
                    </div>
                  ))}
                </div>
              )
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
